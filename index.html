<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyber Security and Emergency App</title>
    <style>
        body {
            font-family: sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        h1 {
            text-align: center;
            margin-bottom: 20px;
        }
        .sos-button {
            background-color: red;
            color: white;
            font-size: 24px;
            padding: 30px 60px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            margin-bottom: 30px;
        }
        .important-contacts-button{
          background-coiour:green;
          colour:white;
          border-radius:10px 20px;
          border-radius:15px;
        }
        .problem-reporting{
          margin-top:20px;
          text-align: center;
        }
        problem-reporting button{
          padding:10px 20px;
          cursor:pointer;
        }
        #contacts-list{
          margin-top:20px;
        }
        .contact-item{
          margin-bottom:5px;
        }
      </style>
      </head>
      <body>
        <h1>cyber security and emergency app</h1>

        <button class="sos-button"
        id="sos-button">SOS</button>

        <h2 class="important-contacts-heading">Important Contacts</h2>
        <button class="add-contact-button" id="addContactButton">Add Contact</button>
        <div id="contacts-list">
            </div>
    
        <div class="problem-reporting">
            <h2>Report a Problem</h2>
            <button id="reportProblemButton">Report</button>
        </div>
    
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                // Permissions
                if (Notification.permission !== 'granted') {
                    Notification.requestPermission();
                }
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(() => {}, () => {});
                }
                if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                    navigator.mediaDevices.getUserMedia({ video: true }).catch(() => {});
                }
    
                const sosButton = document.getElementById('sosButton');
                const addContactButton = document.getElementById('addContactButton');
                const contactsList = document.getElementById('contacts-list');
    
                let contacts = loadContacts();
                displaycontacts();

                sosButton.addEventListener('click', function() {
                  if (contacts.length > 0) {
                      const message = "నేను ప్రమాదంలో ఉన్నాను! నా స్థానం: ";
                      navigator.geolocation.getCurrentPosition(
                          position => {
                              const locationUrl = https://www.google.com/maps?q=${position.coords.latitude},${position.coords.longitude};
                              alert(SOS పంపబడింది! సందేశం: "${message + locationUrl}");
                              // ఇక్కడ మీరు మీ బ్యాక్-ఎండ్‌కు SMS మరియు WhatsApp పంపడానికి ఒక అభ్యర్థనను పంపాలి
                              // fetch('/send_sos', {
                              //     method: 'POST',
                              //     headers: {
                              //         'Content-Type': 'application/json'
                              //     },
                              //     body: JSON.stringify({ contacts: contacts, message: message + locationUrl })
                              // });
                          },
                          error => {
                              alert(లొకేషన్ పొందడంలో విఫలమైంది. SOS పంపబడింది! సందేశం: "${message}");
                              // లొకేషన్ లేకుండా SOS పంపే లాజిక్
                              // fetch('/send_sos', { ... });
                          }
                      );
                  } else {
                      alert("దయచేసి ముందుగా ముఖ్యమైన కాంటాక్ట్‌లను జోడించండి!");
                  }
                });

                addContactButton.addEventListener('click', function() {
                  const newContact = prompt("దయచేసి కాంటాక్ట్ నెంబర్‌ను నమోదు చేయండి:");
                  if (newContact) {
                      contacts.push(newContact);
                      saveContacts(contacts);
                      displayContacts();
                  }
              });
  
              function displayContacts() {
                  contactsList.innerHTML = '';
                  contacts.forEach(contact => {
                      const contactItem = document.createElement('div');
                      contactItem.classList.add('contact-item');
                      contactItem.textContent = contact;
                      contactsList.appendChild(contactItem);
                  });
              }
  
              function saveContacts(contacts) {
                  localStorage.setItem('importantContacts', JSON.stringify(contacts));
              }
  
              function loadContacts() {
                  const storedContacts = localStorage.getItem('importantContacts');
                  return storedContacts ? JSON.parse(storedContacts) : [];
              }
  
              const reportProblemButton = document.getElementById('reportProblemButton');
reportProblemButton.addEventListener('click',
function(){
  const problem = prompt("మీ సమస్యను వివరించండి:");
  if (problem) {
      alert(సమస్య నివేదించబడింది: "${problem}");
      // ఇక్కడ మీరు మీ బ్యాక్-ఎండ్‌కు సమస్య నివేదికను పంపే లాజిక్‌ను జోడించవచ్చు
      // fetch('/report_problem', { ... });
  }
});
});
</script>
</body>
</html>